FORMAT: 1A
HOST: http://hitsapi.apiblueprint.org/

# HITS API

Hok Im Tong IT Service APIs provide actions to organize and retrieve information
about the congregation to support various ministries.

## REST API conventions

- Custom verbs are allowed through `X-HTTP-Method-Override`, but use sparingly.
- Use HAL styled references (use hypertext `_links` to navigate the API).
  Always include a `self` reference for entities that have an ID.
- Query references by ID, not by link (in `GET` requests).
- Update references by link instead of ID (in `POST` and `PUT` requests).
- No batch operations within the regular APIs.

## Updates

When updating a multi-valued attribute, the entire collection must be
specified. Single-valued complex attribute can be updated using the attribute
path notation, e.g. `foo.bar.baz`, but it cannot be used to update members of
a collection (i.e. `foo[1].bar.baz` is not an acceptable attribute path).

Updates to references must be made using `_links` attribute.

The same rules apply to requests submitted as `multipart/form-data`.

## Removals

For most entities, `DELETE` verb will archive the record, instead of actually
removing the entity from the system. Archived records are not included in query
results by default.

## Group Organization

These APIs are used to maintain the representation of the church organization
in HITS.

### Church Sites [/api/v1/sites{?sort,poolCode,includeArchived}]

This resource represents the multiple locations that GII as a multi-site church
constitutes of. Most entities within HITS would be associated to a particular
church site, either directly or indirectly.

#### List Church Sites [GET]

+ Parameters

    + sort:`+name` (optional, string)
      Ascending and descending sorting over a single field. If not specified,
      the records have no guaranteed ordering.
      
    + poolCode:`BANDUNG_UTARA` (optional, string)
      Filter for church location pool ID.
      
    + includeArchived:`false` (optional, boolean)
      Whether to include church sites that have been marked as archived.
        + Default: false
        
+ Response 200 (application/json)

        [  
            {
                "code": "SETRASARI",
                "name": "GII Setrasari",
                "pool": {
                    "code": "BANDUNG_UTARA",
                    "name": "Bandung Utara"
                },
                "addresses": [
                  {
                    "label": "HOUSE_OF_WORSHIP",
                    "isPrimary": true,
                    "street": "Jl. Setrasari Plaza C-4",
                    "suite": "GSG Istana EGI Setrasari Mall",
                    "city": "Bandung",
                    "province": "Jawa Barat",
                    "country": "Indonesia",
                    "postalCode": "40162"
                  }
                ],
                "contactNumbers": [
                  {
                    "label": "OFFICE",
                    "isPrimary": true,
                    "number": "2007553",
                    "countryCode": "+62",
                    "areaCode": "22",
                    "isLandline": true
                  }
                ],
                "_links": {
                    "self": {
                        "href": "/api/v1/sites/SETRASARI"
                    },
                    "pool": {
                        "href": "/api/v1/ous/BANDUNG_UTARA"
                    }
                }
            }
        ]

#### Retrieve Church Site Info [GET /api/v1/sites/{id}]

+ Parameters

    + id:`SETRASARI` (string)
      Code of the church site.

+ Response 200 (application/json)

        {
            "code": "SETRASARI",
            "name": "GII Setrasari",
            "addresses": [
              {
                "label": "HOUSE_OF_WORSHIP",
                "isPrimary": true,
                "street": "Jl. Setrasari Plaza C-4",
                "suite": "GSG Istana EGI Setrasari Mall",
                "city": "Bandung",
                "province": "Jawa Barat",
                "country": "Indonesia",
                "postalCode": "40162"
              }
            ],
            "contactNumbers": [
              {
                "label": "OFFICE",
                "isPrimary": true,
                "number": "2007553",
                "countryCode": "+62",
                "areaCode": "22",
                "isLandline": true
              }
            ],
            "_links": {
                "self": {
                    "href": "/api/v1/sites/SETRASARI"
                },
                "pool": {
                    "href": "/api/v1/ous/BANDUNG_UTARA"
                }
            }
        }

#### Create a Church Site [POST]

+ Request (application/json)

        {
            "code": "SETRASARI",
            "name": "GII Setrasari",
            "addresses": [
              {
                "label": "HOUSE_OF_WORSHIP",
                "isPrimary": true,
                "street": "Jl. Setrasari Plaza C-4",
                "suite": "GSG Istana EGI Setrasari Mall",
                "city": "Bandung",
                "province": "Jawa Barat",
                "country": "Indonesia",
                "postalCode": "40162"
              }
            ],
            "contactNumbers": [
              {
                "label": "OFFICE",
                "isPrimary": true,
                "number": "2007553",
                "countryCode": "+62",
                "areaCode": "22",
                "isLandline": true
              }
            ],
            "_links": {
                "pool": {
                    "href": "/api/v1/ous/BANDUNG_UTARA"
                }
            }
        }
        
+ Response 201 (application/json)

    + Headers
    
            Location: /api/v1/sites/SETRASARI
            
    + Body
    
            {
                "code": "SETRASARI",
                "name": "GII Setrasari",
                "pool": {
                    "code": "BANDUNG_UTARA",
                    "name": "Bandung Utara"
                },
                "addresses": [
                  {
                    "label": "HOUSE_OF_WORSHIP",
                    "isPrimary": true,
                    "street": "Jl. Setrasari Plaza C-4",
                    "suite": "GSG Istana EGI Setrasari Mall",
                    "city": "Bandung",
                    "province": "Jawa Barat",
                    "country": "Indonesia",
                    "postalCode": "40162"
                  }
                ],
                "contactNumbers": [
                  {
                    "label": "OFFICE",
                    "isPrimary": true,
                    "number": "2007553",
                    "countryCode": "+62",
                    "areaCode": "22",
                    "isLandline": true
                  }
                ],
                "_links": {
                    "self": {
                        "href": "/api/v1/sites/SETRASARI"
                    },
                    "pool": {
                        "href": "/api/v1/ous/BANDUNG_UTARA"
                    }
                }
            }

#### Update a Church Site [PUT /api/v1/sites/{id}]

+ Parameters

    + id:`SETRASARI` (string)
      Code of the church site.
      
+ Request (application/json)

        {
            "name": "GII EGI"
        }

+ Response 200 (application/json)

        {
            "code": "SETRASARI",
            "name": "GII EGI",
            "pool": {
                "code": "BANDUNG_UTARA",
                "name": "Bandung Utara"
            },
            "addresses": [
              {
                "label": "HOUSE_OF_WORSHIP",
                "isPrimary": true,
                "street": "Jl. Setrasari Plaza C-4",
                "suite": "GSG Istana EGI Setrasari Mall",
                "city": "Bandung",
                "province": "Jawa Barat",
                "country": "Indonesia",
                "postalCode": "40162"
              }
            ],
            "contactNumbers": [
              {
                "label": "OFFICE",
                "isPrimary": true,
                "number": "2007553",
                "countryCode": "+62",
                "areaCode": "22",
                "isLandline": true
              }
            ],
            "_links": {
                "self": {
                    "href": "/api/v1/sites/SETRASARI"
                },
                "pool": {
                    "href": "/api/v1/ous/BANDUNG_UTARA"
                }
            }
        }

#### Archive a Church Site [DELETE /api/v1/sites/{id}]

+ Parameters

    + id:`SETRASARI` (string)
      Code of the church site.

+ Response 200 (application/json)

        {
            "code": "TEGAL",
            "name": "GII Tegal",
            "isArchived": true,
            "pool": {
                "code": "GARUT",
                "name": "Garut"
            },
            "addresses": [
              {
                "label": "HOUSE_OF_WORSHIP",
                "isPrimary": true,
                "street": "Jl. Jenderal Sudirman 32",
                "city": "Tegal",
                "province": "Jawa Tengah",
                "country": "Indonesia",
                "postalCode": "52125"
              }
            ],
            "contactNumbers": [
              {
                "label": "OFFICE",
                "isPrimary": true,
                "number": "351567",
                "countryCode": "+62",
                "areaCode": "283",
                "isLandline": true
              }
            ],
            "_links": {
                "self": {
                    "href": "/api/v1/sites/TEGAL"
                },
                "pool": {
                    "href": "/api/v1/ous/GARUT"
                }
            }
        }

### Organizational Units [/api/v1/ous{?sort,type,parentOUCode,includeArchived}]

Church locations in GII are grouped into pools. While currently there are no higher
level intermediate grouping between pools and the synod, organizational units are
used in HITS to represent this grouping structure, and a possible future hierarchy
under the synod.

#### List Organizational Units [GET]

+ Parameters

    + sort:`+name` (optional, string)
      Ascending and descending sorting over a single field. If not specified,
      the records have no guaranteed ordering.
      
    + type:`POOL` (optional, enum[string])
      Filter for organizational unit type.
        + Members
            + POOL
            + SYNOD

    + parentOUCode:`GII` (optional, string)
      Filter for parent organizational unit.
      
    + includeArchived:`false` (optional, boolean)
      Whether to include organizational units that have been marked as archived.
        + Default: false
        
+ Response 200 (application/json)

        [
            {
                "code": "BANDUNG_UTARA",
                "name": "Bandung Utara",
                "type": "POOL",
                "parent": {
                    "code": "GII",
                    "name": "Gereja Injili Indonesia"
                },
                "_links": {
                    "self": {
                        "href": "/api/v1/ous/BANDUNG_UTARA"
                    },
                    "parent": {
                        "href": "/api/v1/ous/GII"
                    }
                }
            }
        ]

#### Retrieve Organizational Unit Info [GET /api/v1/ous/{id}]

+ Parameters

    + id:`BANDUNG_UTARA` (string)
      Code of the organizational unit.

+ Response 200 (application/json)

        {
            "code": "BANDUNG_UTARA",
            "name": "Bandung Utara",
            "type": "POOL",
            "parent": {
                "code": "GII",
                "name": "Gereja Injili Indonesia"
            },
            "_links": {
                "self": {
                    "href": "/api/v1/ous/BANDUNG_UTARA"
                },
                "parent": {
                    "href": "/api/v1/ous/GII"
                }
            }
        }

#### Create an Organizational Unit [POST]

+ Request (application/json)

        {
            "code": "BANDUNG_UTARA",
            "name": "Bandung Utara",
            "type": "POOL",
            "_links": {
                "parent": {
                    "href": "/api/v1/ous/GII"
                }
            }
        }
        
+ Response 201 (application/json)

    + Headers
    
            Location: /api/v1/ous/BANDUNG_UTARA
            
    + Body
    
            {
                "code": "BANDUNG_UTARA",
                "name": "Bandung Utara",
                "type": "POOL",
                "parent": {
                    "code": "GII",
                    "name": "Gereja Injili Indonesia"
                },
                "_links": {
                    "self": {
                        "href": "/api/v1/ous/BANDUNG_UTARA"
                    },
                    "parent": {
                        "href": "/api/v1/ous/GII"
                    }
                }
            }

#### Update an Organizational Unit [PUT /api/v1/ous/{id}]

+ Parameters

    + id:`BANDUNG_UTARA` (string)
      Code of the organizational unit.

+ Request (application/json)

        {
            "name": "Bandung I"
        }
        
+ Response 200 (application/json)

        {
            "code": "BANDUNG_UTARA",
            "name": "Bandung I",
            "type": "POOL",
            "parent": {
                "code": "GII",
                "name": "Gereja Injili Indonesia"
            },
            "_links": {
                "self": {
                    "href": "/api/v1/ous/BANDUNG_UTARA"
                },
                "parent": {
                    "href": "/api/v1/ous/GII"
                }
            }
        }

#### Archive an Organizational Unit [DELETE /api/v1/ous/{id}]

+ Parameters

    + id:`BANDUNG_UTARA` (string)
      Code of the organizational unit.
      
+ Response 200 (application/json)

        {
            "code": "BANDUNG_UTARA",
            "name": "Bandung Utara",
            "isArchived": true,
            "type": "POOL",
            "parent": {
                "code": "GII",
                "name": "Gereja Injili Indonesia"
            },
            "_links": {
                "self": {
                    "href": "/api/v1/ous/BANDUNG_UTARA"
                },
                "parent": {
                    "href": "/api/v1/ous/GII"
                }
            }
        }

### Services [/api/v1/sites/{siteId}/services{?sort,commission,includeArchived}]

This resource represents the services that people can take as their primary
worship service across GII locations. This includes *regular Sunday Services*,
*Teens service*, and *Sunday School sessions*. Fellowships and prayer meetings
cannot be a person's primary worship service, and thus they are not represented
by this resource.

#### List Services [GET]

+ Parameters

    + siteId:`SETRASARI` (string, required)
      Church site where the service takes place.

    + sort:`+startTime` (string, optional)
      Ascending and descending sorting over a single field. If not specified,
      the records have no guaranteed ordering.
      
    + commission:`ADULTS` (string, optional)
      Filter for the commission that owns the service.
      
    + includeArchived: `false` (boolean, optional)
      Whether to include services that have been marked as archived.
        + Default: false
        
+ Response 200 (application/json)

        [
            {
                "code": "SETRASARI-1",
                "name": "Kebaktian Umum 1",
                "site": {
                    "code": "SETRASARI",
                    "name": "GII Setrasari"
                },
                "commission": "ADULTS",
                "startTime": "07:30",
                "_links": {
                    "self": {
                        "href": "/api/v1/sites/SETRASARI/services/SETRASARI-1"
                    },
                    "site": {
                        "href": "/api/v1/sites/SETRASARI"
                    }
                }
            }
        ]
        
#### Retrieve Service Info [GET /api/v1/sites/{siteId}/services/{id}]

+ Parameters

    + id:`SETRASARI-1` (string)
      Code of the service.
      
+ Response 200 (application/json)

        {
            "code": "SETRASARI-1",
            "name": "Kebaktian Umum 1",
            "site": {
                "code": "SETRASARI",
                "name": "GII Setrasari"
            },
            "commission": "ADULTS",
            "startTime": "07:30",
            "_links": {
                "self": {
                    "href": "/api/v1/sites/SETRASARI/services/SETRASARI-1"
                },
                "site": {
                    "href": "/api/v1/sites/SETRASARI"
                }
            }
        }
        
#### Create a Service [POST /api/v1/services]

+ Request (application/json)

        {
            "code": "SETRASARI-1",
            "name": "Kebaktian Umum 1",
            "commission": "ADULTS",
            "startTime": "07:30",
            "_links": {
                "site": {
                    "href": "/api/v1/sites/SETRASARI"
                }
            }
        }
        
+ Response 201 (application/json)

    + Headers
    
            Location: /api/v1/sites/SETRASARI/services/SETRASARI-1
            
    + Body
    
            {
                "code": "SETRASARI-1",
                "name": "Kebaktian Umum 1",
                "site": {
                    "code": "SETRASARI",
                    "name": "GII Setrasari"
                },
                "commission": "ADULTS",
                "startTime": "07:30",
                "_links": {
                    "self": {
                        "href": "/api/v1/sites/SETRASARI/services/SETRASARI-1"
                    },
                    "site": {
                        "href": "/api/v1/sites/SETRASARI"
                    }
                }
            }
            
#### Update a Service [PUT /api/v1/services/{id}]

+ Parameters

    + id:`SETRASARI-2` (string)
      Code of the service.

+ Request (application/json)

        {
            "startTime": "10:00"
        }
        
+ Response 200 (application/json)

        {
            "code": "SETRASARI-2",
            "name": "Kebaktian Umum 2",
            "site": {
                "code": "SETRASARI",
                "name": "GII Setrasari"
            },
            "commission": "ADULTS",
            "startTime": "10:00",
            "_links": {
                "self": {
                    "href": "/api/v1/sites/SETRASARI/services/SETRASARI-2"
                },
                "site": {
                    "href": "/api/v1/sites/SETRASARI"
                }
            }
        }
        
#### Archive a Service [DELETE /api/v1/sites/{siteId}/services/{id}]

+ Parameters

    + id:`SETRASARI-4` (string)
      Code of the service.
      
+ Response 200 (application/json)

        {
            "code": "SETRASARI-4",
            "name": "Kebaktian Umum 4",
            "isArchived": true,
            "site": {
                "code": "SETRASARI",
                "name": "GII Setrasari"
            },
            "commission": "ADULTS",
            "startTime": "19:00",
            "_links": {
                "self": {
                    "href": "/api/v1/sites/SETRASARI/services/SETRASARI-4"
                },
                "site": {
                    "href": "/api/v1/sites/SETRASARI"
                }
            }
        }

### ResidentialAreas [/api/v1/residentialAreas{?sort,region,city,includeArchived}]
This resource represents the residential areas that devided every city to 
be a smaller areas with one or more coordinators whom responsible for the area.
One residential areas can have more than one residential districts that devided
areas into even smaller area, and each residential districts have one coordinator.
These residential areas numbers on every city can be updated in the time being.

#### List ResidentialAreas [GET]

+ Parameters

    + region:`NORTH` (string, optional)
      Area's region in the city.

    + sort:`+code` (string, optional)
      Ascending and descending sorting over a single field. If not specified,
      the records have no guaranteed ordering.
      
    + city:`Bandung` (string, optional)
      Filter for the city of the residential area.
      
    + includeArchived: `false` (boolean, optional)
      Whether to include services that have been marked as archived.
        + Default: false
        
        
+ Response 200 (application/json)

        [
            {
                "isArchived": false,
                "city": "Bandung",
                "region": "NORTH",
                "code": "BDG.01",
                "_links": {
                    "self": {
                        "href": "/api/v1/residentialAreas/BDG.01"
                    },
                    "coordinators": [
                        {
                            "href": "/api/v1/people/58c177e773a7d31f5b000002"
                        }
                    ]
                },
                "name": "Bandung Utara",
                "coordinators": [
                    "58c177e773a7d31f5b000002"
                ]
            }
            
        ]

#### Retrieve residentialArea Info [GET /api/v1/residentialAreas/{code}]

+ Parameters

    + code:`BDG.01` (string, required)
      Code of the residential area.

+ Response 200 (application/json)
        
        {
            "isArchived": false,
            "city": "Bandung",
            "region": "NORTH",
            "code": "BDG.01",
            "_links": {
                "self": {
                    "href": "/api/v1/residentialAreas/BDG.01"
                },
                "coordinators": [
                    {
                        "href": "/api/v1/people/58c177e773a7d31f5b000002"
                    }
                ]
            },
            "name": "Bandung Utara",
            "coordinators": [
                "58c177e773a7d31f5b000002"
            ]
        }


#### Create a residentialArea [POST /api/v1/residentialAreas]

+ Request (application/json)

        {
            "city" : "Surabaya",
            "region" : "NORTH",
            "code" : "SBY.02",
            "name" : "Surabaya Utara",
            "_links" : {
                "coordinators" : [
                    { "href" : "/api/v1/people/58c177e773a7d31f5b000002" }
                ]
            },
        }
        
+ Response 201 (application/json)

    + Headers
    
            Location: /api/v1/residentialAreas/SBY.02
            
    + Body
    
            {
                "city" : "Surabaya",
                "region" : "NORTH",
                "code" : "SBY.02",
                "name" : "Surabaya Utara",
                "coordinators" : [
                    "58c177e773a7d31f5b000002"
                ]
                
            }
            
#### Update a residentialArea [PUT /api/v1/residentialAreas/{code}]

+ Parameters

    + code:`SBY.02` (string)
      Code of the residentialArea.

+ Request (application/json)

        {
            "name" : "Surabaya Tengah",
        }
        
+ Response 200 (application/json)

        {
            "city" : "Surabaya",
            "region" : "NORTH",
            "code" : "SBY.02",
            "name" : "Surabaya Tengah",
            "coordinators" : [
                "58c177e773a7d31f5b000002"
            ]
            
        }
        
#### Archive a residentialArea [DELETE /api/v1/residentialAreas/{code}]

+ Parameters

    + code:`SBY.02` (string)
      Code of the residentialArea.
      
+ Response 200 (application/json)

        {
            "city" : "Surabaya",
            "region" : "NORTH",
            "code" : "SBY.02",
            "name" : "Surabaya Tengah",
            "coordinators" : [
                "58c177e773a7d31f5b000002"
            ]
            "isArchived" : true
        }
        
### ResidentialDistricts [/api/v1/residentialDistricts{?sort,name,coordinator,residentialArea,includeArchived}]
This resource represents the residential districts that devided residential area 
into smaller areas. a residential have one coordinator that responsible to all
congregants within the area such as giving a calendar every year, be an observer
of the congregants growth, etc. This districts will be assigned to every congregants
based on where they lived ( for Bandung area ) and assigned based on where they worshiped
( for non Bandung area ).

#### List ResidentialDistricts [GET]

+ Parameters

    + name (string, optional)
      Area's districts name in the city.
      
    + coordinator:`58c177e773a7d31f5b000001` (ObjectId, optional)
      coordinator who responsible on the districts.
      
    + residentialArea: `BDG.01` (string, optional)
      code of the residential area to filter districts based on its area.
      
    + sort:`+name` (string, optional)
      Ascending and descending sorting over a single field. If not specified,
      the records have no guaranteed ordering.
      
    + includeArchived: `false` (boolean, optional)
      Whether to include services that have been marked as archived.
        + Default: false
        
        
+ Response 200 (application/json)

        [
            {
                "isArchived": false,
                "residentialArea": {
                    "code": "BDG.01",
                    "name": "Bandung Utara"
                },
                "_links": {
                    "residentialArea": {
                        "href": "/api/v1/residentialAreas/BDG.01"
                    },
                    "self": {
                        "href": "/api/v1/residentialDistricts/BDG.0001"
                    },
                    "coordinator": {
                        "href": "/api/v1/people/58c177e773a7d31f5b000001"
                    }
                },
                "code": "BDG.0001",
                "name": "Dago Pakar",
                "coordinator": "58c177e773a7d31f5b000001"
            },
            {
                "isArchived": false,
                "residentialArea": {
                    "code": "BDG.01",
                    "name": "Bandung Utara"
                },
                "_links": {
                    "residentialArea": {
                        "href": "/api/v1/residentialAreas/BDG.01"
                    },
                    "self": {
                        "href": "/api/v1/residentialDistricts/BDG.0003"
                    },
                    "coordinator": {
                        "href": "/api/v1/people/58c177e773a7d31f5b000001"
                    }
                },
                "code": "BDG.0003",
                "name": "Mekar Wangi",
                "coordinator": "58c177e773a7d31f5b000001"
            },
            {
                "isArchived": false,
                "residentialArea": {
                    "code": "BDG.01",
                    "name": "Bandung Utara"
                },
                "_links": {
                    "residentialArea": {
                        "href": "/api/v1/residentialAreas/BDG.01"
                    },
                    "self": {
                        "href": "/api/v1/residentialDistricts/BDG.0002"
                    },
                    "coordinator": {
                        "href": "/api/v1/people/58c177e773a7d31f5b000001"
                    }
                },
                "code": "BDG.0002",
                "name": "Setra Duta",
                "coordinator": "58c177e773a7d31f5b000001"
            }
            
        ]

#### Retrieve residentialDistrict Info [GET /api/v1/residentialDistrict/{code}]

+ Parameters

    + code:`BDG.01.0001` (string, required)
      Code of the residential area.

+ Response 200 (application/json)
        
        {
            "isArchived": false,
            "residentialArea": {
                "code": "BDG.01",
                "name": "Bandung Utara"
            },
            "_links": {
                "residentialArea": {
                    "href": "/api/v1/residentialAreas/BDG.01"
                },
                "self": {
                    "href": "/api/v1/residentialDistricts/BDG.0001"
                },
                "coordinator": {
                    "href": "/api/v1/people/58c177e773a7d31f5b000001"
                }
            },
            "code": "BDG.0001",
            "name": "Dago Pakar",
            "coordinator": "58c177e773a7d31f5b000001"
        }


#### Create a residentialDistrict [POST /api/v1/residentialDistricts]

+ Request (application/json)

        {
            "code" : "BDG.02.003",
            "name" : "Soekano Hatta",
            "_links" : {
                "residentialArea" : {
                    "href" : "/api/v1/residentialAreas/BDG.02"
                },
                "coordinator" : {
                    "href" : "/api/v1/people/58c177e773a7d31f5b000001"
                }
            },
        }
        
+ Response 201 (application/json)

    + Headers
    
            Location: /api/v1/residentialDistricts/BDG.02.003
            
    + Body
    
            {
                "code" : "BDG.02.003",
                "name" : "Soekano Hatta",
                "residentialArea" : {
                    "name" : "Bandung Barat",
                    "code" : "BDG.02"
                }
                "coordinator" : "58c177e773a7d31f5b000001"
            }
            
#### Update a residentialDistrict [PUT /api/v1/residentialDistricts/{code}]

+ Parameters

    + code:`BDG.02.003` (string)
      Code of the residentialArea.

+ Request (application/json)

            {
                "name" : "Gatsu",
            }
        
+ Response 200 (application/json)

            {
                "code" : "BDG.02.003",
                "name" : "Gatsu",
                "residentialArea" : {
                    "name" : "Bandung Barat",
                    "code" : "BDG.02"
                }
                "coordinator" : "58c177e773a7d31f5b000001"
            }
        
#### Archive a residentialDistrict [DELETE /api/v1/residentialDistricts/{code}]

+ Parameters

    + code:`BDG.02.003` (string)
      Code of the residentialArea.
      
+ Response 200 (application/json)

            {
                "code" : "BDG.02.003",
                "name" : "Gatsu",
                "residentialArea" : {
                    "name" : "Bandung Barat",
                    "code" : "BDG.02"
                }
                "coordinator" : "58c177e773a7d31f5b000001",
                "isArchived" : true
            }
        
## Group Congregation

These APIs provide actions to store and retrieve information about individuals
in the congregation.

### People [/api/v1/people{?queryId,limit,offset,sort,q,address,radius,condition}]

People refer to every individual that is of interest to the church in order to
carry out services for the congregation. Besides members and visitors, the
people recorded through this API include those who do not attend services in the
church, but are related to one or more congregants. For example, family members
attending another church can also be catalogued.

#### Search for People [GET]

People can be searched in 3 ways:

1. By a free text search (`q`): performs partial match on church site, service,
   full name, alternate names, nickname, and all address components; and case-
   and format-insensitive exact match on email address, phone number, and
   membership ID. Results are always sorted by match score. This is useful to
   quickly find a person.

2. By location (`location`): performs geocoding match within the requested
   radius of the given location. The location must resolve into valid
   coordinates to be processed. The radius cannot exceed 20km and is defaulted
   to 1km. Results are always sorted by proximity to the searched point. This is
   useful to find people living in an area.

3. By advanced query condition (`condition`): executes the query condition as a
   MongoDB query condition. If any of the fields in the query is not allowed,
   the entire query is rejected. This is useful for reporting.

Only one of the query parameters may be specified at a time.

+ Parameters
    + queryId: `1` (optional, string)
      Client query ID, will be echoed back as Query-Id response header.

    + limit: `10` (optional, number)
      Maximum number of people to retrieve.
      
    + offset: `50` (optional, number)
      Number of records to skip.
      
    + sort: `+fullName` (optional, string)
      Ascending and descending sorting over a single field. Only respected on
      searches that use `condition`. 
      
    + q: `jonathan puri` (optional, string)
      Free text search query.
    
    + address: `Setra Duta Hegar` (optional, string)
      Location query.

    + radius: `10` (optional, string)
      Location query max radius in kilometers.

    + condition: `{ "currentMembership.category": "TEEN" }` (optional, string)
      Advanced query condition.

+ Response 200 (application/json)

    + Headers
        
            Query-Id: 1
            Result-Total: 42

    + Body

            [
                {
                    "id": "5077700222",
                    "primarySite": {
                        "code": "SETRASARI",
                        "name": "GII Setrasari"
                    },
                    "otherSites": [
                        {
                            "code": "PURI",
                            "name": "GII Puri"
                        }
                    ],
                    "primaryService": {
                        "serviceId": "SETRASARI-2",
                        "siteName": "GII Setrasari",
                        "startTime": "09:00"
                    },
                    "status": "ACTIVE",
                    "currentMembership": {
                        "type": "REGULAR",
                        "memberId": "200220022",
                        "startDate": {
                            "dayOfMonth": 1,
                            "month": 4,
                            "year": 2007
                        }
                    },
                    "title": "dr.",
                    "fullName": "Jonathan Setiadi",
                    "nickname": "Nathan",
                    "alternateNames": [
                    ],
                    "gender": "M",
                    "_links": {
                        "self": {
                            "href": "/api/v1/people/5077700222"
                        },
                        "primarySite": {
                            "href": "/api/v1/sites/SETRASARI"
                        },
                        "otherSites": [
                            {
                                "href": "/api/v1/sites/PURI"
                            }
                        ]
                    }
                }
            ]

#### Retrieve Person Details [GET /api/v1/people/{id}]

The complete information about a person can be retrieved using this action.
The attributes that get returned depend on the access that the logged in user
has. Some information, such as extended family ties, which retrieval will
result in a separate audit log, will need to be fetched using the `_links`
that may be included in the response.

+ Parameters

    + id:`674b03` (String, required)
      Person system ID.
      
+ Response 200 (application/json)

        {
            "id": "5077700222",
            "primarySite": {
                "code": "SETRASARI",
                "name": "GII Setrasari"
            },
            "otherSites": [
                {
                    "code": "PURI",
                    "name": "GII Puri"
                }
            ],
            "primaryService": {
                "serviceId": "SETRASARI-2",
                "siteName": "GII Setrasari",
                "startTime": "09:00"
            },
            "status": "ACTIVE",
            "currentMembership": {
                "type": "REGULAR",
                "memberId": "200220022",
                "startDate": {
                    "dayOfMonth": 1,
                    "month": 4,
                    "year": 2007
                }
            },
            "pastMemberships": [
                {
                    "type": "GUEST",
                    "memberId": "900220022",
                    "isOtherChurchMember": false,
                    "endDate": {
                        "dayOfMonth": 1,
                        "month": 4,
                        "year": 2007
                    }
                }
            ],
            "title": "dr.",
            "fullName": "Jonathan Setiadi",
            "nickname": "Nathan",
            "alternateNames": [
                {
                    "languageCode": "zho",
                    "fullName": "陈志明",
                    "romanization": "Chen Chee Meng"
                }
            ],
            "gender": "M",
            "race": "CHINESE",
            "birthdate": {
                "dayOfMonth": 12,
                "month": 7,
                "year": 1989
            },
            "legalBirthdate": "1989-07-15",
            "birthPlace": "Bandung",
            "bloodType": {
                "group": "B",
                "rhesus": "NEGATIVE"
            },
            "isBloodDonor": false,
            "nationality": "ID",
            "legalDocuments": [
                {
                    "category": "NATIONAL_ID",
                    "documentId": "3502014702900002"
                }
            ],
            "addresses": [
                {
                    "label": "HOME",
                    "isPrimary": true,
                    "street": "Jalan Surya Sumantri No. 91",
                    "suite": "Majesty Apartment B3 #05-112",
                    "city": "Bandung",
                    "province": "Jawa Barat",
                    "country": "Indonesia",
                    "postalCode": "40164",
                    "coordinates": [-6.8836378, 107.581214],
                    "resolutionDate": "2017-03-24",
                    "provider": "google",
                    "resolvedLocation": {
                        "formattedAddress": "Jl. Surya Sumantri No.91, Sukawarna, Sukajadi, Kota Bandung, Jawa Barat 40164, Indonesia",
                        "administrativeLevels": [
                            "Sukawarna",
                            "Sukajadi",
                            "Kota Bandung",
                            "Jawa Barat"
                        ],
                        "streetNumber": "91",
                        "streetName": "Jalan Surya Sumantri",
                        "country": "Indonesia",
                        "countryCode": "ID",
                        "postalCode": "40164"
                    }
                }
            ],
            "emailAddresses": [
                {
                    "label": "PERSONAL",
                    "isPrimary": true,
                    "email": "jonathan.setiadi@example.com"
                }
            ],
            "contactNumbers": [
                {
                    "label": "MOBILE",
                    "isPrimary": true,
                    "number": "817222333",
                    "countryCode": "+62",
                    "isMobilePhone": true,
                    "isWhatsApp": true,
                    "isLine": true
                },
                {
                    "label": "HOME",
                    "number": "2020333",
                    "countryCode": "+62",
                    "areaCode": "22",
                    "isLandline": true,
                    "isFax": true
                }
            ],
            "employments": [
                {
                    "job": "PHYSICIAN",
                    "position": "Dokter umum",
                    "company": "RS Santo Borromeus",
                    "location": "Bandung",
                    "startDate": {
                        "month": 7,
                        "year": 2012
                    }
                }
            ],
            "educations": [
                {
                    "level": "BACHELORS",
                    "major": "MEDICINE",
                    "institution": "Universitas Kristen Maranatha",
                    "startDate": {
                        "month": 8,
                        "year": 2006
                    },
                    "endDate": {
                        "month": 6,
                        "year": 2012
                    }
                },
                {
                    "level": "HIGH_SCHOOL",
                    "institution": "SMAK 1 Penabur Bandung",
                    "startDate": {
                        "month": 7,
                        "year": 2003
                    },
                    "endDate": {
                        "month": 6,
                        "year": 2006
                    }
                }
            ],
            "_links": {
                "self": {
                    "href": "/api/v1/people/5077700222"
                },
                "primarySite": {
                    "href": "/api/v1/sites/SETRASARI"
                },
                "otherSites": [
                    {
                        "href": "/api/v1/sites/PURI"
                    }
                ]
            }
        }

#### Create a New Person [POST]

A new person record can be created using this action. It requires all basic
"must-have" attributes of a person to be specified.

A person creation might be rejected because of a high degree of similarity with
another person in the system, indicated with a response code of `400` and an
error `err.hits.SIMILAR_RECORD_FOUND`. To force the creation of the record
(i.e. after the similar record has been reviewed), include all `similar` links
in the error as a `notDuplicate` link attribute, and retry the request.

The current membership information of the person *must* be specified, upon
creation, as follows:
  
- **New regular/Sunday School/Teens Service members**:
  specify the membership type (`REGULAR`, `CHILD`, or `TEEN`), and start date
  (optional). A new member ID will be generated and assigned.
  
- **New visitor**:
  specify `GUEST` as membership type, `isOtherChurchMember`, and start date
  (optional). A new guest ID will be generated based on `isOtherChurchMember`.
  
- **Non-congregant**:
  specify `NC` as membership type and optionally `isOtherChurchMember`. Do not
  specify other fields. A new non-congregant ID will be generated.
  
Though atypical, existing members and registered guests can be added too:

- **Existing regular/Sunday School/Teens Service members**:
  specify the membership type (`REGULAR`, `CHILD`, or `TEEN`), member ID, and
  start date (optional).

- **Existing registered visitor**:
  specify `GUEST` as membership type, guest ID, and start date (optional).
  The `isOtherChurchMember` field will be implied based on the guest ID.

When specifying `pastMemberships`, the `memberId` must be specified. The
system will not generate new member/guest/non-congregant ID for past
memberships of a person.

A person must be associated with one primary church site. If the person is a
non-congregant, he should be associated to the primary church site of the
congregant that he is most closely related to.

+ Request with minimal attributes (application/json)

        {
            "status": "ACTIVE",
            "primarySite": {
                "code": "SETRASARI",
                "name": "GII Setrasari"
            },
            "currentMembership": {
                "type": "REGULAR",
                "startDate": {
                    "dayOfMonth": 2,
                    "month": 4,
                    "year": 2017
                }
            },
            "fullName": "Livia Setiadi",
            "gender": "F",
            "_links": {
                "primarySite": {
                    "href": "/api/v1/sites/SETRASARI"
                }
            }
        }
        
+ Request with extra attributes and similar records (application/json)

        {
            "status": "ACTIVE",
            "primarySite": {
                "code": "SETRASARI",
                "name": "GII Setrasari"
            },
            "currentMembership": {
                "type": "REGULAR",
                "startDate": {
                    "dayOfMonth": 2,
                    "month": 4,
                    "year": 2017
                }
            },
            "pastMemberships": [
                {
                    "type": "GUEST",
                    "memberId": "900220021",
                    "isOtherChurchMember": false,
                    "endDate": {
                        "dayOfMonth": 2,
                        "month": 4,
                        "year": 2017
                    }
                }
            ],
            "fullName": "Livia Setiadi",
            "gender": "F",
            "birthDate": {
                "dayOfMonth": 8,
                "month": 3,
                "year": 1992
            },
            "_links": {
                "primarySite": {
                    "href": "/api/v1/sites/SETRASARI"
                },
                "notDuplicate": [
                    {
                        "href": "/api/v1/people/5088800eee"
                    }
                ]
            }
        }

+ Response 201 (application/json)

    + Headers

            Location: /api/v1/people/5010000bbb

    + Body

            {
                "id": "5010000bbb",
                "status": "ACTIVE",
                "currentMembership": {
                    "type": "REGULAR",
                    "memberId": "203011022",
                    "startDate": {
                        "dayOfMonth": 2,
                        "month": 4,
                        "year": 2017
                    }
                },
                "fullName": "Livia Setiadi",
                "gender": "F",
                "_links": {
                    "self": {
                        "href": "/api/v1/people/5010000bbb"
                    },
                    "primarySite": {
                        "href": "/api/v1/sites/SETRASARI"
                    }
                }
            }
            
+ Response 400 (application/json)

        {
            "code": "err.hits.SIMILAR_RECORD_FOUND",
            "message": "Data perorangan tidak dapat ditambahkan karena ada data orang lain yang mirip.",
            "possibleDuplicates": [
                {
                    "id": "5010000bbb",
                    "primarySite": {
                        "code": "DAGO",
                        "name": "GII Dago"
                    },
                    "primaryService": {
                        "serviceId": "DAGO-2",
                        "siteName": "GII Dago",
                        "startTime": "08:00"
                    },
                    "status": "ACTIVE",
                    "currentMembership": {
                        "type": "REGULAR",
                        "memberId": "200220022",
                        "startDate": {
                            "dayOfMonth": 1,
                            "month": 4,
                            "year": 2007
                        }
                    },
                    "fullName": "Livia Setiadi",
                    "gender": "F",
                    "_links": {
                        "self": {
                            "href": "/api/v1/people/5077700222"
                        },
                        "primarySite": {
                            "href": "/api/v1/sites/SETRASARI"
                        }
                    }
                }
            ]
        }

#### Update a Person [PUT /api/v1/people/{id}]

To update a person, an *Edit* need to be created and applied on the record to
be updated. Then, the Edit can be referenced in this action. This action will
automatically mark the Edit as *Resolved* with `ACCEPTED` as the resolution.
An Edit that is already resolved cannot be effected into the person's record.
Only office staffs can perform this action.

The response to a successful commit of an edit contains the complete, updated
person record.

+ Parameters

    + id: `5077700222` (String, required)
      Person system ID.
      
+ Request (application/json)

        {
            "_links": {
                "edit": {
                    "href": "/api/v1/profileEdits/5432112345",
                }
            }
        }
        
+ Response 200 (application/json)

        {
            "id": "5077700222",
            "primarySite": {
                "code": "SETRASARI",
                "name": "GII Setrasari"
            },
            "otherSites": [
                {
                    "code": "PURI",
                    "name": "GII Puri"
                }
            ],
            "primaryService": {
                "serviceId": "SETRASARI-2",
                "siteName": "GII Setrasari",
                "startTime": "09:00"
            },
            "status": "ACTIVE",
            "currentMembership": {
                "type": "REGULAR",
                "memberId": "200220022",
                "startDate": {
                    "dayOfMonth": 1,
                    "month": 4,
                    "year": 2007
                }
            },
            "pastMemberships": [
                {
                    "type": "GUEST",
                    "memberId": "900220022",
                    "isOtherChurchMember": false,
                    "endDate": {
                        "dayOfMonth": 1,
                        "month": 4,
                        "year": 2007
                    }
                }
            ],
            "title": "dr.",
            "fullName": "Jonathan Setiadi",
            "nickname": "Nathan",
            "alternateNames": [
                {
                    "languageCode": "zho",
                    "fullName": "陈志明",
                    "romanization": "Chen Chee Meng"
                }
            ],
            "gender": "M",
            "race": "CHINESE",
            "birthdate": {
                "dayOfMonth": 12,
                "month": 7,
                "year": 1989
            },
            "legalBirthdate": "1989-07-15",
            "birthPlace": "Bandung",
            "bloodType": {
                "group": "B",
                "rhesus": "NEGATIVE"
            },
            "isBloodDonor": false,
            "nationality": "ID",
            "legalDocuments": [
                {
                    "category": "NATIONAL_ID",
                    "documentId": "3502014702900002"
                }
            ],
            "addresses": [
                {
                    "label": "HOME",
                    "isPrimary": true,
                    "street": "Jalan Surya Sumantri No. 91",
                    "suite": "Majesty Apartment B3 #05-112",
                    "city": "Bandung",
                    "province": "Jawa Barat",
                    "country": "Indonesia",
                    "postalCode": "40164",
                    "coordinates": [-6.8836378, 107.581214],
                    "resolutionDate": "2017-03-24",
                    "provider": "google",
                    "resolvedLocation": {
                        "formattedAddress": "Jl. Surya Sumantri No.91, Sukawarna, Sukajadi, Kota Bandung, Jawa Barat 40164, Indonesia",
                        "administrativeLevels": [
                            "Sukawarna",
                            "Sukajadi",
                            "Kota Bandung",
                            "Jawa Barat"
                        ],
                        "streetNumber": "91",
                        "streetName": "Jalan Surya Sumantri",
                        "country": "Indonesia",
                        "countryCode": "ID",
                        "postalCode": "40164"
                    }
                }
            ],
            "emailAddresses": [
                {
                    "label": "PERSONAL",
                    "isPrimary": true,
                    "email": "jonathan.setiadi@example.com"
                }
            ],
            "contactNumbers": [
                {
                    "label": "MOBILE",
                    "isPrimary": true,
                    "number": "817222333",
                    "countryCode": "+62",
                    "isMobilePhone": true,
                    "isWhatsApp": true,
                    "isLine": true
                },
                {
                    "label": "HOME",
                    "number": "2020333",
                    "countryCode": "+62",
                    "areaCode": "22",
                    "isLandline": true,
                    "isFax": true
                }
            ],
            "employments": [
                {
                    "job": "PHYSICIAN",
                    "position": "Dokter umum",
                    "company": "RS Santo Borromeus",
                    "location": "Bandung",
                    "startDate": {
                        "month": 7,
                        "year": 2012
                    }
                }
            ],
            "educations": [
                {
                    "level": "BACHELORS",
                    "major": "MEDICINE",
                    "institution": "Universitas Kristen Maranatha",
                    "startDate": {
                        "month": 8,
                        "year": 2006
                    },
                    "endDate": {
                        "month": 6,
                        "year": 2012
                    }
                },
                {
                    "level": "HIGH_SCHOOL",
                    "institution": "SMAK 1 Penabur Bandung",
                    "startDate": {
                        "month": 7,
                        "year": 2003
                    },
                    "endDate": {
                        "month": 6,
                        "year": 2006
                    }
                }
            ],
            "_links": {
                "self": {
                    "href": "/api/v1/people/5077700222"
                },
                "primarySite": {
                    "href": "/api/v1/sites/SETRASARI"
                },
                "otherSites": [
                    {
                        "href": "/api/v1/sites/PURI"
                    }
                ]
            }
        }


### Profile Edits [/api/v1/profileEdits{?limit,offset,sort,status}]

Profile edits are used to update a person's record. Congregants, ministers,
and office staffs are allowed to create edits, but only office staffs can
effect an edit into a profile.

Historical edits are not deleted or archived through the API, but are pruned
according to data retention policy.

#### List Profile Edits [GET]

Edits can be filtered by their status and the person they apply to. Typically
only unresolved edits are of interest, but resolved edits may also be reviewed
for historical purposes. Older resolved edits may get archived after
satisfying the data retention policy, and will no longer be accessible from 
this action.

This action is not audited, but only provides the list of edits and their
summary, if specified. The edit data needs to be retrieved separately.

+ Parameters

    + limit:`10` (optional, number)
      Maximum number of edits to retrieve.
      
    + offset:`50` (optional, number)
      Number of edit records to skip.
      
    + sort:`+resolutionDate` (optional, string)
      Ascending and descending sorting over a single field. If not specified,
      the edits will be sorted based on the creation date.
      
    + status:`UNRESOLVED` (optional, enum[string])
      Filter for edit status.
        + Members
            + UNRESOLVED
            + RESOLVED
            + ACCEPTED
            + REJECTED
            + CANCELLED

+ Response 200 (application/json)

        [
            {
                "id": "5432112345",
                "person": {
                    "personId": "5077700222",
                    "personName": "Jonathan Setiadi"
                },
                "isResolved": false,
                "creationDate": "2017-04-01",
                "submitterName": "Jonathan Setiadi",
                "_links": {
                    "self": {
                        "href": "/api/v1/profileEdits/5432112345"
                    },
                    "person": {
                        "href": "/api/v1/people/5077700222"
                    },
                    "submitter": {
                        "href": "/api/v1/people/5115511551"
                    }
                }
            },
            {
                "id": "567a907c67",
                "person": {
                    "personId": "5077700222",
                    "personName": "Jonathan Setiadi"
                },
                "isResolved": true,
                "creationDate": "2017-03-28",
                "resolutionDate": "2017-03-29",
                "resolution": "ACCEPTED",
                "submitterName": "Maria Magdalena",
                "reviewerName": "Maria Magdalena",
                "_links": {
                    "self": {
                        "href": "/api/v1/profileEdits/5432112345"
                    },
                    "person": {
                        "href": "/api/v1/people/5077700222"
                    },
                    "submitter": {
                        "href": "/api/v1/people/5115511551"
                    },
                    "reviewer": {
                        "href": "/api/v1/people/5115511551"
                    }
                }
            }
        ]

#### Retrieve Edit Data [GET /api/v1/profileEdits/{id}]

This action returns the complete edit data, usually for review purposes. If
the user that makes the request does not have access to one or more fields
in the edit, the response will be `403 Forbidden`, unlike getting people
details, where the response get redacted. This is because the decision to
accept or reject will apply to the entire edit, and thus a partial info is not
good enough to make such a call.

+ Parameters

    + id:`567a907c67` (required, string)
      The identifier of the edit.

+ Response 200 (application/json)

        {
            "id": "567a907c67",
            "person": {
                "personId": "5077700222",
                "personName": "Jonathan Setiadi"
            },
            "isResolved": true,
            "creationDate": "2017-03-28",
            "resolutionDate": "2017-03-29",
            "resolution": "ACCEPTED",
            "submitterName": "Maria Magdalena",
            "reviewerName": "Maria Magdalena",
            "edit": {
                "emailAddresses": [
                    {
                        "label": "PERSONAL",
                        "isPrimary": true,
                        "email": "jonathan.setiadi@example.com"
                    },
                    {
                        "label": "WORK",
                        "email": "jonathan.setiadi@hospital.com"
                    }
                ],
                "_links": {
                    "primaryService": {
                        "href": "/sites/SETRASARI/services/1"
                    }
                }
            },
            "_links": {
                "self": {
                    "href": "/api/v1/profileEdits/5432112345"
                },
                "person": {
                    "href": "/api/v1/people/5077700222"
                },
                "submitter": {
                    "href": "/api/v1/people/5115511551"
                },
                "reviewer": {
                    "href": "/api/v1/people/5115511551"
                }
            }
        }

#### Create an Edit [POST]

This action creates a new edit towards a person's profile.

**Note:** Edits that are submitted by people with the right to *review* edits
(e.g. office staffs) will automatically be approved and effected.

+ Request (application/json)

        {
            "edit": {
                "emailAddresses": [
                    {
                        "label": "PERSONAL",
                        "isPrimary": true,
                        "email": "jonathan.setiadi@example.com"
                    },
                    {
                        "label": "WORK",
                        "email": "jonathan.setiadi@hospital.com"
                    }
                ],
                "_links": {
                    "primaryService": {
                        "href": "/sites/SETRASARI/services/1"
                    }
                }
            },
            "_links": {
                "person": {
                    "href": "/api/v1/people/5077700222"
                }
            }
        }

+ Response 201 (application/json)

    + Headers

            Location: /api/v1/profileEdits/567a907c67

    + Body

            {
                "id": "567a907c67",
                "person": {
                    "personId": "5077700222",
                    "personName": "Jonathan Setiadi"
                },
                "isResolved": true,
                "creationDate": "2017-03-28",
                "resolutionDate": "2017-03-29",
                "resolution": "ACCEPTED",
                "submitterName": "Maria Magdalena",
                "reviewerName": "Maria Magdalena",
                "edit": {
                    "emailAddresses": [
                        {
                            "label": "PERSONAL",
                            "isPrimary": true,
                            "email": "jonathan.setiadi@example.com"
                        },
                        {
                            "label": "WORK",
                            "email": "jonathan.setiadi@hospital.com"
                        }
                    ],
                    "_links": {
                        "primaryService": {
                            "href": "/sites/SETRASARI/services/1"
                        }
                    }
                },
                "_links": {
                    "self": {
                        "href": "/api/v1/profileEdits/5432112345"
                    },
                    "person": {
                        "href": "/api/v1/people/5077700222"
                    },
                    "submitter": {
                        "href": "/api/v1/people/5115511551"
                    },
                    "reviewer": {
                        "href": "/api/v1/people/5115511551"
                    }
                }
            }
            
#### Closing an Edit [PUT /profileEdits/{id}]

To close an edit, change its resolution to `REJECTED` or `CANCELLED`, and
optionally provide a justification. This action cannot be used for accepting
an edit, which should be done using the `PUT /people/{id}` action instead.

The response returns the edit, along with edit contents, with its new status.

+ Parameters

    + id:`5181aa2b3b` (required, string)
      The identifier of the edit.
      
+ Request (application/json)

        {
            "resolution": "REJECTED",
            "justification": "Alamat tidak jelas."
        }
        
+ Response 200 (application/json)

        {
            "id": "5181aa2b3b",
            "person": {
                "personId": "5077700222",
                "personName": "Jonathan Setiadi"
            },
            "isResolved": true,
            "creationDate": "2017-04-19",
            "resolutionDate": "2017-04-21",
            "resolution": "REJECTED",
            "justification": "Alamat tidak jelas.",
            "reviewerName": "Maria Magdalena",
            "submitterName": "Jonathan Setiadi",
            "edit": {
                {
                    "label": "HOME",
                    "isPrimary": true,
                    "street": "Setra Duta",
                    "city": "Bandung",
                    "province": "Jawa Barat",
                    "country": "Indonesia"
                }
            },
            "_links": {
                "self": {
                    "href": "/api/v1/profileEdits/5181aa2b3b"
                },
                "person": {
                    "href": "/api/v1/people/5077700222"
                },
                "submitter": {
                    "href": "/api/v1/people/5077700222"
                },
                "reviewer": {
                    "href": "/api/v1/people/5115511551"
                }
            }
        }
        
## Group System

### System session [/api/v1/sessions]

This endpoint allows users to login and logout. A session is identified by the
`sessionId` cookie.

#### Get current session info [GET /api/v1/sessions/current]

This action returns the current session state, which states ehether or not the
session is authenticated, and if so, the logged in user.

+ Response 200 (application/json)

        {
            "isAuthenticated": true,
            "user": {
                "id": "58d54be250f0d4ee34ed44dd",
                "fullName": "Maria Magdalena",
                "nickname": "Maria",
                "membershipId": "200200200",
                "_links": {
                    "self": {
                        "href": "/api/v1/systemUsers/58d54be250"
                    },
                    "owner": {
                        "href": "/api/v1/people/5115511551"
                    }
                }
            },
            "_links": {
                "self": {
                    "href": "/api/v1/session"
                }
            }
        }
        
#### Authenticate a session [POST]

Users can log in with the local registry using this action. Upon successful
login, the current session will become authenticated, and the session info is
sent in the response body.

+ Request (application/json)

        {
            "loginId": "200200200",
            "password": "secret"
        }
        
+ Response 200 (application/json)

        {
            "isAuthenticated": true,
            "user": {
                "id": "58d54be250f0d4ee34ed44dd",
                "fullName": "Maria Magdalena",
                "nickname": "Maria",
                "membershipId": "200200200",
                "_links": {
                    "self": {
                        "href": "/api/v1/systemUsers/58d54be250"
                    },
                    "owner": {
                        "href": "/api/v1/people/5115511551"
                    }
                }
            },
            "_links": {
                "self": {
                    "href": "/api/v1/session"
                }
            }
        }
        
+ Response 401 (application/json)

        {
            "code": "err.hits.LOGIN_FAILED",
            "message": "Login ID atau password salah."
        }

#### Reset the current session [DELETE /api/v1/sessions/current]

This action will discard authentication and flow data associated with the
current session and generate a new session ID. A new `sessionId` cookie will
be sent along with the response. Use this action to log out.

+ Response 204 (application/json)

### Action flows [/api/v1/flows]

Action flow is a session-specific execution of a multi-step interactive workflow,
such as user registration. A flow typically consists of multiple states. State
transition occurs when data is changed in the flow. For example, in the user
registration flow, adding `otp` data in the `PHONE_OTP_VERIFICATION` state will
cause a transition to the `KNOWN_PHONE_SIGNUP` or `PERSON_DATA_INPUT` state,
depending on whether the phone number that was verified is found to be associated
with a person or not.

The server will reject invalid data updates and include the error code in the
response. The invalid data will not be reflected in the `data` attribute, and it is
not guaranteed that the invalid data will always be included in the error response.

The current flows that are active in a session are retrieved through the
`GET /session` action.

#### Notes on client implementation

- A client is not obliged to always reflect the current state of the flow. For
example, given a ticket booking flow that consists of `TIME_SELECTION`,
`SEAT_SELECTION`, and `PAYMENT` states, after selecting a concert time, the flow
state will be `SEAT_SELECTION`, but the user might go back in the UI to revisit
the concert time to attend. In this case, the state known to the server will not
change, but the client is allowed to render the form associated to `TIME_SELECTION`
state.

- One session can hold multiple flows, so technically it is possible to support
multiple things going on at once, e.g. a ticket booking wizard in one tab, and
a service request on another. The server may reject creation of multiple flows that
can fail to reach eventual consistency, such as two registration flows.

#### Start a flow [POST]

The client may provide as much data as it has in hand when starting a flow, and
the server will determine at what state the flow would begin in.

For example, in a ticket booking flow, a flow may start with no data, which will
be at the `TIME_SELECTION` state, or start with concert timeslot and seat selection
data, which will put it at the `PAYMENT` state, if the data is valid.

+ Request (application/json)

        {
            "flow": "USER_REGISTRATION",
            "data": {
                "phone": {
                    "number": "8122001222",
                    "countryCode": "+62"
                }
            }
        }

+ Response 201 (application/json)

    + Headers
    
            Location: /api/v1/flows/550aa181c4
            
    + Body
    
            {
                "id": "550aa181c4",
                "flow": "USER_REGISTRATION",
                "state": "PHONE_OTP_VERIFICATION",
                "data": {
                    "phone": {
                        "number": "8122001222",
                        "countryCode": "+62"
                    },
                    "otpTimestamp": "2017-05-21T02:04:30Z"
                },
                "requestedInputs": {
                    "otp": {
                        "type": "String",
                        "required": true
                    }
                },
                "_links": {
                    "self": {
                        "href": "/api/v1/flows/550aa181c4"
                    }
                }
            }

#### Update flow data [PUT /api/v1/flows/{id}]

This action allows the client to update the flow data, which may cause a state
transition. If a state transition occurs, the server may populate additional
data to the flow, for example, after a successful phone OTP verification, the
server will set the person information in the flow data, if the phone number is in
the records.

Some updates cause the server to perform an action without a state transition. For
example, `{"otpTimestamp": null}` is an update that will be interpreted as
resetting the OTP, and a new OTP will be sent to the phone in the flow data.

*Note:* It is preferred to trigger an action by performing an update to a data
field, but it is not always semantically possible. In such cases, an action may
be requested by explicitly updating an `action` attribute into the flow.

Unacceptable input always leads to `400` response, even if the data is related to
authentication or authorization.

+ Parameters

    + id:`550aa181c4` (required, string)
      The identifier of the flow.

+ Request (application/json)

        {
            "otp": "123456"
        }
        
+ Response 200 (application/json)

        {
            "id": "550aa181c4",
            "flow": "USER_REGISTRATION",
            "state": "KNOWN_PHONE_SIGNUP",
            "data": {
                "phone": {
                    "number": "817222333",
                    "countryCode": "+62"
                },
                "person": {
                    "fullName": "Jonathan Setiadi",
                    "nickname": "Nathan",
                    "alternateNames": [
                        {
                            "languageCode": "zho",
                            "fullName": "陈志明",
                            "romanization": "Chen Chee Meng"
                        }
                    ],
                    "gender": "M",
                    "primarySite": {
                        "code": "SETRASARI",
                        "name": "GII Setrasari"
                    },
                    "otherSites": [
                        {
                            "code": "PURI",
                            "name": "GII Puri"
                        }
                    ],
                    "status": "ACTIVE",
                    "currentMembership": {
                        "type": "REGULAR",
                        "memberId": "200220022",
                        "startDate": {
                            "dayOfMonth": 1,
                            "month": 4,
                            "year": 2007
                        }
                    }
                }
            },
            "requestedInputs": {
                "email": {
                    "type": "String",
                    "required": true
                },
                "password": {
                    "type": "String",
                    "required": true
                }
            },
            "_links": {
                "self": {
                    "href": "/api/v1/flows/550aa181c4"
                }
            }
        }

+ Response 400 (application/json)

        {
            "flow": "USER_REGISTRATION",
            "state": "PHONE_OTP_VERIFICATION",
            "data": {
                "phone": {
                    "number": "8122001222",
                    "countryCode": "+62"
                },
                "otpTimestamp": "2017-05-21T02:04:30Z"
            },
            "requestedInputs": {
                "otp": {
                    "type": "String",
                    "required": true
                }
            },
            "error": {
                {
                    "code": "err.hits.INCORRECT_PHONE_OTP",
                    "message": "Kode verifikasi salah."
                }
            },
            "_links": {
                "self": {
                    "href": "/api/v1/flows/550aa181c4"
                }
            }
        }

#### Terminate a flow [DELETE /api/v1/flows/{id}]

This action allows the client to cancel a flow.

+ Parameters

    + id:`550aa181c4` (required, string)
      The identifier of the flow.
      
+ Response 204

## Group Statistics

### Data Statistics [/api/v1/stats]

This endpoint returns requested statistics. Some statistics may be cached, and
unless the client explicitly requests for fresh data, cached information will
be returned because collecting statistics can be taxing to the database.

Most statistics only include people with `status: 'ACTIVE'`. All statistics only
include entities that are not archived.

The response contains a `groups` attribute that lists all groups in the data.
Some statistics also contain `subgroups` attribute that lists the groups within
each group of data. There are never more than 2 layers of grouping.

#### Note on client implementation

The group is ideal for forming slices in a pie chart or horizontal axis of a
bar chart. The subgroup can be used for stacking bars or side-by-side bars in
each category.

#### Retrieve statistics [GET /api/v1/stats/{id}{?scope,condition}]

+ Parameters

    + id: `PEOPLE_BY_AGE_AND_GENDER` (required, string)
      The identifier of the statistics.

    + scope: `SETRASARI:*:TEEN,REGULAR_ATTENDER` (optional, string)
      Scope of entities for which the statistics is requested. It can contain
      three scope descriptors: `<site>:<service>:<categories>`. To match all,
      specify `*` for earlier parts of the descriptor. Later descriptors may be
      completely omitted, e.g. `PURI` is a valid descriptor. Multiple categories
      should be comma-separated.

    + condition: `{ nationality: "SG" }` (optional, string)
      MongoDB query condition to limit the statistics. If any of the fields is
      not whitelisted, the request will be rejected.

+ Response 200 (application/json)

    + Headers

            Stats-Collected: ''

    + Body

            {
                "groups": [ "0-4", "5-14", "15-24", ..., "90+" ],
                "subgroups": [ "M", "F" ],
                "values": {
                    "0-4": {
                        "M": 18,
                        "F": 16
                    },
                    "5-14": {
                        "M": 87,
                        "F": 99
                    },
                    "15-24": {
                        "M": 104,
                        "F": 125
                    },
                    ...
                    "90+": {
                        "M": 0,
                        "F": 2
                    }
                }
            }
            
## Group Events and Ticketing

### Events [/api/v1/events]

This endpoint returns the list of all available events for a congregant or a
public user to join. It only includes published upcoming events that are not
archived. Filters such as city, category, and date range are available.

When the API returns multiple events, the server optimizes the ordering of the
items. Items are generally sorted ascending by date, except for featured events,
which are always put first in the results. The client is expected to respect
the server's ordering when presenting the list to the user.

An *event* represents a planned activity that can occur one or many times. If an
event consists of multiple *schedules*, typically all of them are repeat of the
same activity (e.g. a concert that is scheduled 3 times), or they are *sessions*
for participants to attend (e.g. a training of 5 sessions).

Related events are identified by tags. Each event can have multiple tags. Tags
can signify the type of event (e.g. `CONCERT`, `REVIVAL_MEETING`) or an event
series (e.g. `FAMILY_MONTH_2017`, `CHRISTMAS_2017`).

The activities in an event are modeled using schedules and sessions:

- An *event* has one or more *schedule*. All of them must share the same ticket
  classes with the same prices, but not necessarily the same number of tickets
  for each class. This gives some leeway to differentiate schedule pricing, but
  should be used sparingly. If two schedules have completely different pricing,
  consider creating a separate event.

- A *schedule* has one or more *sessions*, which can be held at different places
  at different times. A ticket is good for all sessions in the schedule. When a
  schedule only consists of one session, the session details can be omitted.

- A *session* always refers to a single occassion. This system assumes that all
  sessions of a schedule are held in the same place.

The following attributes can be present:

- Unique object ID on *event*, *schedule*, *session*, and *transport options*.
- Short code on *event*, which must be globally unique. The code can only
  contain lowercase alphabets and numbers. If not specified when creating an
  event, the system will assign one. The client may use this short code for a
  URL. The code cannot be changed.
- Name, description, tags, and charge model on an *event*.
- Ticket classes on an *event*.
- Start and end times either on *schedule* (for a single session schedule) or a
  *session*, but not both.
- Venue on *event* or *schedule*, but not both.
- Transport option on *schedule*.

The example payloads currently do not include sessions.

Event descriptions can be written in plain text or in Markdown. When it is in
Markdown, newlines and double quotes are escaped as `\n` and `\"` respectively.

#### List events [GET /api/v1/events/{?limit,offset,city,tag,startDate,endDate}]

+ Parameters

    + limit: `10` (optional, number)
      Maximum number of events to retrieve.
      
    + offset: `50` (optional, number)
      Number of records to skip.

    + city: `Bandung` (optional, string)
      Only include events that have a schedule with venue in the given city.
   
    + tag: `CHRISTMAS,CONCERT` (optional, string)
      Only include events that have all of the specified tags (comma-separated).
      
    + startDate: `2017-12-01` (optional, string)
      Only include events that have a schedule starting on or after the date.

    + endDate: `2017-12-31` (optional, string)
      Only include events that have a schedule starting before or on the date.
        
+ Response 200 (application/json)

    + Body

            [
                {
                    "id": "507f1f77bcf86cd799439011",
                    "code": "xmas17",
                    "name": "Perayaan Natal Umum 2017",
                    "image": "/img/9876asd964eqwesad54sda8964sdak499.jpg",
                    "tags": [ "CHRISTMAS" ],
                    "venue": {
                        "name": "GII Dago",
                        "address": {
                            "street": "Jl. Cikapayang No. 2-4",
                            "city": "Bandung",
                            "province": "Jawa Barat",
                            "country": "Indonesia",
                            "postalCode": "40116"
                        },
                        "room": "Main Worship Hall"
                    }
                    "scheduleCount": 3,
                    "earliestSchedule": {
                        "code": "095059d4-71c4-4863-bb50-c20135d21fff",
                        "startTime": "2017-12-14T11:00:00Z",
                        "endTime": "2017-12-14T13:30:00Z"
                    },
                    "latestSchedule": {
                        "code": "eff136a6-677d-4c31-ab2e-dd760d927ebd",
                        "startTime": "2017-12-16T11:00:00Z",
                        "endTime": "2017-12-16T13:30:00Z"
                    },
                    "chargeModel": "FREE",
                    "_links": {
                        "self": {
                            "href": "/api/v1/events/507f1f77bcf86cd799439011"
                        }
                    }
                }
            ]
            
#### Retrieve event details [GET /api/v1/events/{id}]

+ Parameters

    + id: `507f1f77bcf86cd799439011` (required, string)
      Event ID.
        
+ Response 200 (application/json)

    + Body

            {
                "id": "507f1f77bcf86cd799439011",
                "code": "xmas17",
                "name": "Perayaan Natal Umum 2017",
                "summary": "Natal Umum tahunan yang diadakan oleh GII Hok Im Tong untuk membuat sebuah ibadah yang menyatukan semua lokasi",
                "description": "Natal Umum tahunan yang diadakan oleh GII Hok Im Tong untuk membuat sebuah ibadah yang menyatukan semua lokasi.\n\n# Tema\n\nChanged By Grace"
                "image": "/img/9876asd964eqwesad54sda8964sdak499.jpg",
                "ytVideoId": "M7lc1UVf-VE",
                "tags": [ "CHRISTMAS" ],
                "venue": {
                    "name": "GII Dago",
                    "address": {
                        "street": "Jl. Cikapayang No. 2-4",
                        "city": "Bandung",
                        "province": "Jawa Barat",
                        "country": "Indonesia",
                        "postalCode": "40116"
                    },
                    "room": "Main Worship Hall"
                },
                "scheduleCount": 3,
                "earliestSchedule": {
                    "code": "095059d4-71c4-4863-bb50-c20135d21fff",
                    "startTime": "2017-12-14T11:00:00Z",
                    "endTime": "2017-12-14T13:30:00Z"
                },
                "latestSchedule": {
                    "code": "eff136a6-677d-4c31-ab2e-dd760d927ebd",
                    "startTime": "2017-12-16T11:00:00Z",
                    "endTime": "2017-12-16T13:30:00Z"
                },
                "schedules": [
                    {
                        "code": "095059d4-71c4-4863-bb50-c20135d21fff",
                        "startTime": "2017-12-14T11:00:00Z",
                        "endTime": "2017-12-14T13:30:00Z",
                        "transportOptions": [
                            {
                                "code": "02e1ee28-a3ad-4dc1-8702-67058c7584de",
                                "pickupLocation": {
                                    "name": "GII Setrasari",
                                    "address": {
                                        "street": "Jl. Setrasari Plaza C-4",
                                        "suite": "GSG Istana EGI Setrasari Mall",
                                        "city": "Bandung",
                                        "province": "Jawa Barat",
                                        "country": "Indonesia",
                                        "postalCode": "40162"
                                    }
                                },
                                "departureTime": "2017-12-14T09:30:00Z"
                            }
                        ]
                    }
                ],
                "chargeModel": "FREE",
                "availableTicketClasses": [
                    {
                        "code": "89859896-5ca2-4146-9bcb-8ac1324fbbd0",
                        "name": "Tiket umum",
                        "price": {
                            "nominal": 0,
                            "currency": "IDR"
                        },
                        "maxQuantity": 3,
                        "salesChannel": "ONLINE",
                        "salesStart": "2017-11-12T12:00:00+07:00",
                        "salesEnd": "2017-12-13T23:59:59+07:00"
                    }
                ],
                "_links": {
                    "self": {
                        "href": "/api/v1/events/507f1f77bcf86cd799439011"
                    }
                }
            }

### Event Organizer APIs [/api/v1/eo]

Endpoints under `/eo` are used to create and manage events. They have different
access control behavior and provide different details from the `/events` API.
Clients cannot assume the data structures provided by either one to be a subset
of the other.

Notes on payload to create/update event:

- Event code can be specified, but must be globally unique. Schedule and
  transport codes are always generated.

- Event code cannot be changed.

- Image URL will not be honored. To set the event image, upload an image using
  multipart request.

- Venues of events and transport options are not linked to church site address,
  but are to be specified manually. The client may implement this by first
  getting the list of church sites and their addresses, presenting this to the
  user, and copying the details to the event creation request payload.

- Tags are not free text, they must match one of the `EVENT_TAGS` enum. A tag
  that does not match this enum will cause the entire request to be rejected.

- Tags will be sorted alphabetically.

- Event venue can be specified in event scope or in each of the schedules, but
  not both. That is, one **cannot** specify the venue for "most" schedules in
  the global scope and override it in some schedules.

- An event can be created only if it has: `name`, `code`, and `organizer`.

- In addition to those, an event can be *published* only if it has at least one
  item in `schedules`, `coordinator`, and `venue` set either in the event scope
  or in each of the schedules.

- The organizer must either be a *Site* or an *Org Unit*.

#### List Events [GET /api/v1/eo/events{?sort,limit,offset,name,city,tag,startDate,endDate,includeArchived}]

+ Parameters

    + sort: `+schedule` (optional, string)
      Ascending and descending sorting over a single field. If not specified,
      the records have no guaranteed ordering. Sorting by schedule orders events
      by their earliest start time.

    + limit: `10` (optional, number)
      Maximum number of events to retrieve.
      
    + offset: `50` (optional, number)
      Number of records to skip.

    + name: `Natal` (optional, string)
      Filter events by partial name (case-insensitive).

    + city: `Bandung` (optional, string)
      Only include events that have a schedule with venue in the given city.
   
    + tag: `CHRISTMAS,CONCERT` (optional, string)
      Only include events that have all of the specified tags (comma-separated).
      
    + startDate: `2017-12-01` (optional, string)
      Only include events that have a schedule starting on or after the date.

    + endDate: `2017-12-31` (optional, string)
      Only include events that have a schedule starting before or on the date.
        
+ Response 200 (application/json)

    + Body

            [
                {
                    "id": "507f1f77bcf86cd799439011",
                    "code": "xmas17",
                    "name": "Perayaan Natal Umum 2017",
                    "image": "/img/9876asd964eqwesad54sda8964sdak499.jpg",
                    "tags": [ "CHRISTMAS" ],
                    "venue": {
                        "name": "GII Dago",
                        "address": {
                            "street": "Jl. Cikapayang No. 2-4",
                            "city": "Bandung",
                            "province": "Jawa Barat",
                            "country": "Indonesia",
                            "postalCode": "40116"
                        },
                        "room": "Main Worship Hall"
                    },
                    "scheduleCount": 3,
                    "earliestSchedule": {
                        "code": "095059d4-71c4-4863-bb50-c20135d21fff",
                        "startTime": "2017-12-14T11:00:00Z",
                        "endTime": "2017-12-14T13:30:00Z"
                    },
                    "latestSchedule": {
                        "code": "eff136a6-677d-4c31-ab2e-dd760d927ebd",
                        "startTime": "2017-12-16T11:00:00Z",
                        "endTime": "2017-12-16T13:30:00Z"
                    },
                    "chargeModel": "FREE",
                    "isPublished": true,
                    "organizer": {
                        "code": "GII",
                        "name": "Gereja Injili Indonesia"
                    },
                    "_links": {
                        "self": {
                            "href": "/api/v1/eo/events/507f1f77bcf86cd799439011"
                        },
                        "organizer": {
                            "href": "/api/v1/ous/GII"
                        },
                        "publicObject": {
                            "href": "/api/v1/events/507f1f77bcf86cd799439011"
                        }
                    }
                }
            ]

#### Retrieve event details [GET /api/v1/eo/events/{id}]

+ Parameters

    + id: `507f1f77bcf86cd799439011` (required, string)
      Event ID.
        
+ Response 200 (application/json)

    + Body

            {
                "id": "507f1f77bcf86cd799439011",
                "code": "xmas17",
                "name": "Perayaan Natal Umum 2017",
                "image": "/img/9876asd964eqwesad54sda8964sdak499.jpg",
                "ytVideoId": "M7lc1UVf-VE",
                "tags": [ "CHRISTMAS" ],
                "venue": {
                    "name": "GII Dago",
                    "address": {
                        "street": "Jl. Cikapayang No. 2-4",
                        "city": "Bandung",
                        "province": "Jawa Barat",
                        "country": "Indonesia",
                        "postalCode": "40116"
                    },
                    "room": "Main Worship Hall"
                },
                "schedules": [
                    {
                        "code": "095059d4-71c4-4863-bb50-c20135d21fff",
                        "startTime": "2017-12-14T11:00:00Z",
                        "endTime": "2017-12-14T13:30:00Z",
                        "transportOptions": [
                            {
                                "code": "02e1ee28-a3ad-4dc1-8702-67058c7584de",
                                "pickupLocation": {
                                    "name": "GII Setrasari",
                                    "address": {
                                        "street": "Jl. Setrasari Plaza C-4",
                                        "suite": "GSG Istana EGI Setrasari Mall",
                                        "city": "Bandung",
                                        "province": "Jawa Barat",
                                        "country": "Indonesia",
                                        "postalCode": "40162"
                                    }
                                },
                                "departureTime": "2017-12-14T09:30:00Z"
                            }
                        ]
                    }
                ],
                "chargeModel": "FREE",
                "isPublished": true,
                "organizer": {
                    "code": "GII",
                    "name": "Gereja Injili Indonesia"
                },
                "_links": {
                    "self": {
                        "href": "/api/v1/eo/events/507f1f77bcf86cd799439011"
                    },
                    "organizer": {
                        "href": "/api/v1/ous/GII"
                    },
                    "publicObject": {
                        "href": "/api/v1/events/507f1f77bcf86cd799439011"
                    }
                }
            }

#### Create an event [POST /api/v1/eo/events]

+ Request without image (application/json)

        {
            "code": "xmas17",
            "name": "Perayaan Natal Umum 2017",
            "summary": "Who would imagine a king?",
            "description": "A shepherd or teacher is what you could be\nOr maybe a fisherman out on the sea\nOr maybe a carpenter building things\nBut who would imagine a king?",
            "ytVideoId": "M7lc1UVf-VE",
            "tags": [ "CHRISTMAS" ],
            "venue": {
                "name": "GII Dago",
                "address": {
                    "street": "Jl. Cikapayang No. 2-4",
                    "city": "Bandung",
                    "province": "Jawa Barat",
                    "country": "Indonesia",
                    "postalCode": "40116"
                },
                "room": "Main Worship Hall"
            },
            "ticketClasses": [
                {
                    "name": "Umum",
                    "description": "Tiket umum",
                    "price": {
                        "nominal": 0,
                        "currency": "IDR"
                    },
                    "maxOrder": 5,
                    "salesChannel": "ONLINE",
                    "isPublicBookingAllowed": true,
                    "salesStart": "2017-11-26T08:00:00+07:00",
                    "salesEnd": "2017-12-13T23:59:00+07:00"
                },
                {
                    "name": "Langsung",
                    "description": "Pada saat acara",
                    "price": {
                        "nominal": 0,
                        "currency": "IDR"
                    },
                    "maxOrder": 1,
                    "salesChannel": "MANUAL",
                    "salesStart": "2017-12-14T12:00:00+07:00",
                    "salesEnd": "2017-12-16T23:59:00+07:00"
                }
            ],
            "schedules": [
                {
                    "startTime": "2017-12-14T18:00:00+07:00",
                    "endTime": "2017-12-14T20:30:00Z+07:00",
                    "transportOptions": [
                        {
                            "pickupLocation": {
                                "name": "GII Setrasari",
                                "address": {
                                    "street": "Jl. Setrasari Plaza C-4",
                                    "suite": "GSG Istana EGI Setrasari Mall",
                                    "city": "Bandung",
                                    "province": "Jawa Barat",
                                    "country": "Indonesia",
                                    "postalCode": "40162"
                                }
                            },
                            "departureTime": "2017-12-14T16:30:00+07:00"
                        }
                    ]
                }
            ],
            "isPublished": true,
            "_links": {
                "organizer": {
                    "href": "/api/v1/ous/GII"
                }
            }
        }

+ Request with image (multipart/form-data; boundary=---BOUNDARY)

        -----BOUNDARY
        Content-Disposition: form-data; name="code"
        
        joyofchristmas17
        -----BOUNDARY
        Content-Disposition: form-data; name="name"
        
        Joy of Christmas
        -----BOUNDARY
        Content-Disposition: form-data; name="tags"
        
        CHRISTMAS
        -----BOUNDARY
        Content-Disposition: form-data; name="tags"
        
        CONCERT
        -----BOUNDARY
        Content-Disposition: form-data; name="description"
        
        # Lyrics

        I feel you Christmas
        I know I've found you
        You never fade away
        The joy of Christmas
        Stays here inside us
        Fills each and every heart with love
        -----BOUNDARY
        Content-Disposition: form-data; name="venue[0][name]"
        
        GII Dago
        -----BOUNDARY
        Content-Disposition: form-data; name="venue[0][address][street]"
        
        Jl. Cikapayang No. 2-4
        -----BOUNDARY
        Content-Disposition: form-data; name="_links[organizer][href]"
        
        /api/v1/ous/GII
        -----BOUNDARY
        Content-Disposition: form-data; name="imageFile"; filename="joy banner.jpg"
        Content-Type: image/jpeg

        (Binary data)
        
+ Response 201 (application/json)

    + Headers
    
            Location: /api/v1/eo/events/507f1f77bcf86cd799439011
            
    + Body
    
            {
                "id": "507f1f77bcf86cd799439011",
                "code": "xmas17",
                "name": "Perayaan Natal Umum 2017",
                "summary": "Who would imagine a king?",
                "description": "A shepherd or teacher is what you could be\nOr maybe a fisherman out on the sea\nOr maybe a carpenter building things\nBut who would imagine a king?",
                "image": "/img/9876asd964eqwesad54sda8964sdak499.jpg",
                "ytVideoId": "M7lc1UVf-VE",
                "tags": [ "CHRISTMAS" ],
                "venue": {
                    "name": "GII Dago",
                    "address": {
                        "street": "Jl. Cikapayang No. 2-4",
                        "city": "Bandung",
                        "province": "Jawa Barat",
                        "country": "Indonesia",
                        "postalCode": "40116"
                    },
                    "room": "Main Worship Hall"
                },
                "schedules": [
                    {
                        "code": "095059d4-71c4-4863-bb50-c20135d21fff",
                        "startTime": "2017-12-14T11:00:00Z",
                        "endTime": "2017-12-14T13:30:00Z",
                        "transportOptions": [
                            {
                                "code": "02e1ee28-a3ad-4dc1-8702-67058c7584de",
                                "pickupLocation": {
                                    "name": "GII Setrasari",
                                    "address": {
                                        "street": "Jl. Setrasari Plaza C-4",
                                        "suite": "GSG Istana EGI Setrasari Mall",
                                        "city": "Bandung",
                                        "province": "Jawa Barat",
                                        "country": "Indonesia",
                                        "postalCode": "40162"
                                    }
                                },
                                "departureTime": "2017-12-14T09:30:00Z"
                            }
                        ]
                    }
                ],
                "chargeModel": "FREE",
                "isPublished": true,
                "organizer": {
                    "code": "GII",
                    "name": "Gereja Injili Indonesia"
                },
                "_links": {
                    "self": {
                        "href": "/api/v1/eo/events/507f1f77bcf86cd799439011"
                    },
                    "organizer": {
                        "href": "/api/v1/ous/GII"
                    },
                    "publicObject": {
                        "href": "/api/v1/events/507f1f77bcf86cd799439011"
                    }
                }
            }

#### Update an event [PUT /api/v1/eo/events/{id}]

+ Request without image update (application/json)

        {
            "ytVideoId": "M7lc1UVf-VE",
            "tags": [ "CHRISTMAS" ],
            "schedules": [
                {
                    "startTime": "2017-12-14T18:00:00+07:00",
                    "endTime": "2017-12-14T20:30:00Z+07:00",
                    "transportOptions": [
                        {
                            "pickupLocation": {
                                "name": "GII Setrasari",
                                "address": {
                                    "street": "Jl. Setrasari Plaza C-4",
                                    "suite": "GSG Istana EGI Setrasari Mall",
                                    "city": "Bandung",
                                    "province": "Jawa Barat",
                                    "country": "Indonesia",
                                    "postalCode": "40162"
                                }
                            },
                            "departureTime": "2017-12-14T16:30:00+07:00"
                        }
                    ]
                }
            ],
            "isPublished": true,
            "_links": {
                "organizer": {
                    "href": "/api/v1/ous/GII"
                }
            }
        }

+ Request with image update (multipart/form-data; boundary=---BOUNDARY)

        -----BOUNDARY
        Content-Disposition: form-data; name="tags"
        
        CHRISTMAS
        -----BOUNDARY
        Content-Disposition: form-data; name="tags"
        
        CONCERT
        -----BOUNDARY
        Content-Disposition: form-data; name="venue[0][name]"
        
        GII Dago
        -----BOUNDARY
        Content-Disposition: form-data; name="venue[0][address][street]"
        
        Jl. Cikapayang No. 2-4
        -----BOUNDARY
        Content-Disposition: form-data; name="_links[organizer][href]"
        
        /api/v1/ous/GII
        -----BOUNDARY
        Content-Disposition: form-data; name="imageFile"; filename="joy banner.jpg"
        Content-Type: image/jpeg

        (Binary data)

+ Response 200 (application/json)

        {
            "id": "507f1f77bcf86cd799439011",
            "code": "xmas17",
            "name": "Perayaan Natal Umum 2017",
            "summary": "Who would imagine a king?",
            "description": "A shepherd or teacher is what you could be\nOr maybe a fisherman out on the sea\nOr maybe a carpenter building things\nBut who would imagine a king?",
            "image": "/img/9876asd964eqwesad54sda8964sdak499.jpg",
            "ytVideoId": "M7lc1UVf-VE",
            "tags": [ "CHRISTMAS" ],
            "venue": {
                "name": "GII Dago",
                "address": {
                    "street": "Jl. Cikapayang No. 2-4",
                    "city": "Bandung",
                    "province": "Jawa Barat",
                    "country": "Indonesia",
                    "postalCode": "40116"
                },
                "room": "Main Worship Hall"
            },
            "schedules": [
                {
                    "code": "095059d4-71c4-4863-bb50-c20135d21fff",
                    "startTime": "2017-12-14T11:00:00Z",
                    "endTime": "2017-12-14T13:30:00Z",
                    "transportOptions": [
                        {
                            "code": "02e1ee28-a3ad-4dc1-8702-67058c7584de",
                            "pickupLocation": {
                                "name": "GII Setrasari",
                                "address": {
                                    "street": "Jl. Setrasari Plaza C-4",
                                    "suite": "GSG Istana EGI Setrasari Mall",
                                    "city": "Bandung",
                                    "province": "Jawa Barat",
                                    "country": "Indonesia",
                                    "postalCode": "40162"
                                }
                            },
                            "departureTime": "2017-12-14T09:30:00Z"
                        }
                    ]
                }
            ],
            "chargeModel": "FREE",
            "isPublished": true,
            "organizer": {
                "code": "GII",
                "name": "Gereja Injili Indonesia"
            },
            "_links": {
                "self": {
                    "href": "/api/v1/eo/events/507f1f77bcf86cd799439011"
                },
                "organizer": {
                    "href": "/api/v1/ous/GII"
                },
                "publicObject": {
                    "href": "/api/v1/events/507f1f77bcf86cd799439011"
                }
            }
        }

#### Archive an event [DELETE /api/v1/eo/events/{id}]

+ Response 200 (application/json)

        {
            "id": "507f1f77bcf86cd799439011",
            "code": "xmas17",
            "name": "Perayaan Natal Umum 2017",
            "summary": "Who would imagine a king?",
            "isArchived": true,
            "isPublished": true,
            "organizer": {
                "code": "GII",
                "name": "Gereja Injili Indonesia"
            },
            "_links": {
                "self": {
                    "href": "/api/v1/eo/events/507f1f77bcf86cd799439011"
                },
                "organizer": {
                    "href": "/api/v1/ous/GII"
                },
                "publicObject": {
                    "href": "/api/v1/events/507f1f77bcf86cd799439011"
                }
            }
        }
